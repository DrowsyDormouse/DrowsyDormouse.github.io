---
layout: post
title: log 테이블의 파티션 관리 프로시저에 대해
comments: true
categories: [MySQL]
tag: [MySQL]
---

## Purpose of Study
MySQL 파티션 시스템을 편리하게 관리하는 프로시저를 학습하고 만들어보고자 하였습니다.   
로그 파티션 관리 테이블의 값에 따라, 테이블마다 설정된 기간으로 파티션을 생성하고 추가하는 프로시저를 만들고자 하였습니다.  

<br/>

여러분은 책을 자주 읽으시나요?   
저는 특별한 이슈가 없다면 아침, 점심, 저녁 가리지 않고 자리에 앉아, 책을 펼치고 밀려오는 졸음과 씨름하며 읽는 편입니다.   
회사에서 읽는 자기 개발 서적이 가장 머리에 쏙쏙 들어오는 편이죠. ~합법 월루 너무 좋아요~   
그 날도 평소와 같이 자리에서 들어오는 이슈를 다 치고 월급 루팡 겸 자습을 하고 있었습니다.   

> **세희님, 잠깐 시간 괜찮으세요?**

> *네?*

![](../asset/Partition%20Procedure/images/joker_bear_1.jpg)   

대체 무슨 일이지. 방금 졸면서 머리 헤드 벵잉 하는 거 보셨나... 

> **세희님, 혹시 바쁘세요?**

> *앗... 아뇨....*

> **그럼 공부할 겸 해서 이거 한번 해보실래요?**

> ***헉 뭔데요? 완전 좋아용~***


<br/>
<br/>


## log 테이블의 파티션 관리 프로시저에 대해
 - [Purpose of Study](#purpose-of-study)

<br/>

![](../asset/Partition%20Procedure/images/2022-04-05%20171027.png)   

다음 블로그 글을 참고하였습니다.   
 - [[MySQL] 사용자 로그 테이블 - (1) Primary Key가 필요한가?](https://purumae.tistory.com/209?category=652830)
 - [[MySQL] 사용자 로그 테이블 - (2) 파티션 관리](https://purumae.tistory.com/210?category=652830)
 - [[MySQL] 사용자 로그 테이블 - (3) 자동화된 파티션 관리](https://purumae.tistory.com/211?category=652830)

<br/>

일단 무엇을 만들어야하는지 정확히 알아봅시다.  
고객의 needs는 아래와 같습니다.  

1. 매개변수로 일, 주, 월을 받아서 해당 주기만큼 파티션을 나눠줘야 함.  
2. 이미 파티션이 있을 경우에는 추가해주고 없을 경우에는 새로 생성해줘야 함.  
3. 프로시저로 만들어줬으면 좋겠음.
  
<br/>
  
> *좋아! 이제 만들어보자! 엥? 근데 파티션이 뭐지?*  
  
<br/>
  
먼저 MySQL 파티션의 개념을 알아봅시다.  
  
<br/>

### 파티션이란  
데이터를 별도의 테이블로 분리해서 저장하나, 사용자 입장에서 하나의 테이블로 읽기와 쓰기를 할 수 있게 해주는 기능  

#### 파티션을 사용하는 이유
 1. INSERT와 범위 SELECT의 빠른 처리
 2. 주기적으로 삭제 등의 작업이 이루어지는 이력성 데이터의 효율적인 관리
 3. 데이터의 물리적인 저장소를 분리 